$schema: "https://json-schema.org/draft/07/schema"
$id: "https://teagantotally.rocks/deepthought/meta/compoundunit"
title: Compound Unit schema validating meta-schema

type:
  - object
  - boolean
definitions:
  simpleUnitSchema:
    type: string
    pattern: "[a-z][a-z_]+"
  productUnitSchema:
    type: object
    properties:
      unit:
        $ref: "#/definitions/compoundUnitSchema"
      multipliedBy:
        $ref: "#/definitions/compoundUnitSchema"
    required:
      - unit
      - multipliedBy
  inverseUnitShema:
    type: object
    properties:
      inverse:
        $ref: "#/definitions/compoundUnitSchema"
    required:
      - inverse
  exponentUnitSchema:
    type: object
    properties:
      unit:
        $ref: "#/definitions/compoundUnitSchema"
      exponent:
        type: number
  groupUnitSchema:
    type: object
    properties:
      group:
        $ref: "#/definitions/compoundUnitSchema"
    required:
      - group
  compoundUnitSchema:
    anyOf:
      - $ref: "#/definitions/simpleUnitSchema"
      - $ref: "#/definitions/productUnitSchema"
      - $ref: "#/definitions/exponentUnitSchema"
      - $ref: "#/definitions/inverseUnitShema"
      - $ref: "#/definitions/groupUnitSchema"
properties:
  id:
    type: string
    minLength: 1
    pattern: "^[a-z][a-z_]+[a-z]$"
  name:
    type: string
    minLength: 1
    pattern: "^[A-Z][a-zA-Z ]+$"
  description:
    type: string
    minLength: 1
  symbol:
    type: string
    minLength: 1
    pattern: "^(?:[a-zA-Z _\-\/]+(?:[\^][0-9]+)?)+$"
  unit:
    $ref: "#/definitions/compoundUnitSchema"
required:
  - id
  - name
  - description
  - symbol
  - unit
default: true